---
- name: Patching Centos Linux System
  hosts: all
  ignore_errors: yes

  tasks:
   - name: Update all packages on the server
     yum:
      name: '*'
      state: latest
     when: app_process_check.stdout == ansible_distribution == ‘CentOS’ or ansible_distribution == ‘Red Hat Enterprise Linux’
     register: yum_update

   - name: Reboot a slow machine that might have lots of updates to apply
     reboot:
       reboot_timeout: 3600
